# Memory and Swap Usage Monitor

このプロジェクトは、複数のリモートマシンのメモリとスワップの使用状況をリアルタイムで監視し、グラフとして表示するアプリケーションです。

## 機能

- リモートマシンからのメモリとスワップ使用率を収集
- 使用率をリアルタイムでグラフに表示
- メモリとスワップのしきい値を設定し、超過時に通知を送信
- 最大48時間分のデータを保持し、時系列で表示

## 使用技術

- **Node.js**: バックエンドの実装
- **Express**: API サーバーの構築
- **Chart.js**: フロントエンドでのグラフ描画
- **Axios**: フロントエンドでのデータ取得
- **HTML/CSS/JavaScript**: フロントエンドの実装

## セットアップ

### 必要条件

- Node.js がインストールされていること
- `free` コマンドが利用可能であること（Linux 環境）
- リモートマシンにエージェントスクリプトを配置すること

### インストール手順

1. リポジトリをクローンします。

   ```bash
   git clone <リポジトリURL>
   cd memory-monitor-app
   ```

2. **依存関係をインストールします:**
   ```bash
   npm install
   ```

3. **環境変数を設定します:**
   ルートディレクトリに `.env` ファイルを作成し、通知設定やしきい値を定義します。

4. **アプリケーションを起動します:**
   ```bash
   node src/app.js
   ```

## 使用方法

アプリケーションを起動すると、複数のリモートマシンのメモリとスワップの使用状況がリアルタイムで監視され、ブラウザ上にグラフとして表示されます。しきい値を超えた場合は通知がトリガーされます。

### リモートマシンのエージェントスクリプト

リモートマシンに以下のエージェントスクリプトを配置し、監視サーバーにデータを送信します。

#### エージェントスクリプト例

以下は、リモートマシンで動作するエージェントスクリプトの例です。このスクリプトは、`free` コマンドを使用してメモリとスワップの使用率を取得し、監視サーバーに送信します。

```bash
#!/bin/bash

SERVER_URL="http://<監視サーバーのIP>:8080/api/report"
HOSTNAME=$(hostname)

while true; do
    MEMORY=$(free -b | grep Mem | awk '{print $3/$2 * 100.0}')
    SWAP=$(free -b | grep Swap | awk '{print $3/$2 * 100.0}')
    
    curl -X POST -H "Content-Type: application/json" -d '{
        "hostname": "'"$HOSTNAME"'",
        "memoryUsage": '"$MEMORY"',
        "swapUsage": '"$SWAP"'
    }' $SERVER_URL

    sleep 5
done
```

## 貢献

改善やバグ修正のための問題やプルリクエストを自由に提出してください。

## ライセンス

このプロジェクトは MIT ライセンスの下でライセンスされています。